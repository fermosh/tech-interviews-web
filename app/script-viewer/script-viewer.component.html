<div *ngIf='scriptViewer'>
    <div class="script-viewer-header">
        <div class="container">
            <div class="final-score-box">
                <h2><span class="final-score-label-value">{{ scriptViewer.rating | number:'1.0-1' }}</span></h2><br>
                <span class="final-score-label-text">Final Score</span>
            </div>
            <div class="script-viewer-title-box">
                <h2>{{ scriptViewer.competencyName }} {{ scriptViewer.domain }}</h2>
                <span class="competency-level-label-value">{{ scriptViewer.levelName }} - {{ scriptViewer.levelDescription }}</span>
            </div>
            
        </div>
    </div>
    <br>
    <br>
    <div class="container">
        <section class="uui-accordion cards-accordion" id="accordion-skills" *ngIf="scriptViewer.skills && scriptViewer.skills.length">
            <div class="panel accordion-item" *ngFor='let skill of scriptViewer.skills'>
                <div class="accordion-heading">
                    <p class="accordion-title">
                        <a data-toggle="collapse" class="accordion-toggle" [href]="'#skill_' + skill.skillId">
                            <div [class]="'score-label-value ' + skill.ratingStyle"><h3>{{ skill.rating | number:'1.0-1' }}</h3></div><span class="skill-label-value">{{ skill.skillName }}</span><br>
                            <span [class]="'uui-label ' + skill.priorityStyle">{{ skill.priority }}</span>&nbsp;&nbsp;
                            <span class="starting-label-value">{{ skill.startingFrom }}</span>&nbsp;&nbsp;
                            <span class="topic-label-value">{{ skill.topic }}</span>
                        </a>
                    </p>
                </div>
                <div class="accordion-collapse collapse in" [id]="'skill_' + skill.skillId">
                    <div class="accordion-body">
                        <table class="table" *ngIf='skill.questions && skill.questions.length'>
                            <tbody>
                                <tr *ngFor='let question of skill.questions'>
                                    <td>
                                        <table>
                                            <tr>
                                                <td>{{ question.question }}</td>
                                                <td class="rating-cell">
                                                    <ai-star [rating]='question.rating' (ratingClicked)='question.rating=$event'></ai-star>
                                                </td>                                            
                                                <td class="comments-cell">
                                                    <i [ngClass]="{ 'fa': true, 'fa-comment': question.comments, 'fa-comment-o': !question.comments, 'icon-button': true }"
                                                    data-toggle="collapse"
                                                    [attr.data-target]="'#skill_' + skill.skillId + '_question_' + question.questionId"
                                                    aria-expanded="false"
                                                    [attr.aria-controls]="'skill_' + skill.skillId + '_question_' + question.questionId"></i>
                                                </td>
                                            </tr>
                                        </table>
                                        <div class="collapse" [id]="'skill_' + skill.skillId + '_question_' + question.questionId">
                                            <input type="text" class="uui-form-element comments-input" [(ngModel)]="question.comments" placeholder="Additional Comments" />
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
        <br>
        <br>

        <h3 class="medium-gray" style="text-transform: none;">Exercises</h3>
        <section class="uui-tabs" *ngIf="scriptViewer.exercises && scriptViewer.exercises.length">
            <div class="tabs-heading">
                <ul class="nav nav-tabs">
                    <li *ngFor="let exercise of scriptViewer.exercises; let index = index" [class.active]="index == 0">
                        <a data-toggle="tab" [href]="'#tab_ex_' + exercise.id">{{ exercise.title }}</a>
                    </li>
                </ul>
            </div>
            <div class="tabs-body">
                <div class="tab-content">
                    <div *ngFor="let exercise of scriptViewer.exercises; let index = index" [id]="'tab_ex_' + exercise.id" [ngClass]="{ 'tab-pane': true, 'ex-tab-pane': true, 'active': index == 0 }">
                        <h3><span class="ex-subtitle-label">Description</span></h3>
                        <p class="gray">{{ exercise.description }}</p><br>
                        <h3><span class="ex-subtitle-label">Score</span></h3>
                        <table>
                            <tr>
                                <td class="ex-rating-cell">
                                    <ai-star [rating]='exercise.rating' (ratingClicked)='exercise.rating=$event'></ai-star>
                                </td>
                                <td>&nbsp;</td>
                                <td>
                                    <input type="text" class="uui-form-element" style="width: 100%;" [(ngModel)]="exercise.comments" placeholder="Additional Comments" />
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>
<br>
<br>